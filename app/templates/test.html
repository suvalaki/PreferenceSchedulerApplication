<!doctype html>
<html>
    <head>

    
    </head>

<body>

    <div class="testclass"></div>

    <div class="timeline-base"></div>

    <script type="text/javascript">
    
    var div2 = document.querySelector('.testclass');
    var newNode = document.createElement('h1');
    var nodeText = document.createTextNode('asdas');

    newNode.appendChild(nodeText);
    div2.appendChild(newNode);
    
    </script>

    <script>
    
        var timelineRoot = document.querySelector('.timeline-base')

        // create the data

        data = { axis_label : [ [1,1,2,2], [1,2,3,4] ],
                 shifts : [
                     {name: 'shift1', start_index : 2, end_index : 3},
                     {name:' shift2', start_index : 2, end_index : 4}
                 ],
                 options : {
                    cellwidth : 40,
                    cellheight : 40,
                 }
        }


        var timelineRootTable = document.createElement('table')
        var timelineRootTableTbody = document.createElement('tbody')
        var timelineRootTableTr = document.createElement('tr')

        var headerTable = document.createElement('table')
        var headerTableTbody = document.createElement('tbody')
        /*var headerTableTr = document.createElement('tr')
        headerTableTr.className = 'headerTableTr'*/

        var headerTableTd = document.createElement('td')

        timelineRoot.appendChild(timelineRootTable)
        timelineRootTable.appendChild(timelineRootTableTbody)
        //timelineRootTableTbody.appendChild(timelineRootTableTr)

        timeline_ticks_table = function(par, data, cellwidth, cellheight ){
            
            var border_len = 1;


            var rootTbody = document.createElement('tbody')
            var rootTr    = document.createElement('tr')
            
           
            rootTbody.style.padding = "0px 0px 0px 0px";
            rootTbody.style.margin  = "0px 0px 0px 0px";
            rootTbody.style.borderCollapse = "collapse";
            rootTr.style.padding    = "0px 0px 0px 0px";
            rootTr.style.margin     = "0px 0px 0px 0px";
            rootTr.style.borderCollapse = "collapse";

            par.appendChild(rootTbody) 
            rootTbody.appendChild(rootTr)

            for (d in data){
                var cellNode = document.createElement('td')
                var cellText = document.createTextNode('')
                cellNode.appendChild(cellText)
                cellNode.className = 'timeline-data-cell'
                cellNode.width = cellwidth + "px"
                cellNode.height = cellheight + "px"
                cellNode.style.borderTop = '1px';
                cellNode.style.borderBottom = '1px';
                cellNode.style.borderLeft = '1px';
                cellNode.style.borderRight = border_len + 'px';
                cellNode.style.borderStyle = 'solid'
                cellNode.style.borderColor = 'black'
                cellNode.style.padding = "0px 0px 0px 0px";
                cellNode.style.margin = "0px 0px 0px 0px";
                cellNode.style.cellSpacing = "0px 0px 0px 0px";
                cellNode.style.cellPadding = "0px 0px 0px 0px";
                rootTr.appendChild(cellNode)
            }
        }

        /*timeline_ticks_table(timelineRootTableTr ,
                            data["axis_label"][1],
                            data["options"]["cellwidth"],
                            data["options"]["cellheight"])*/

        data_bar = function(par, data, cellwidth, cellheight, shift){

            var shift_bar = document.createElement('div')

            var width = (shift['end_index'] - shift['start_index']) * cellwidth
            var left = shift['start_index'] * cellwidth

            shift_bar.className = 'timeline-data-bar'
            shift_bar.style.width =  width + 'px'
            shift_bar.style.height = cellheight + 'px'
            shift_bar.style.position = 'absolute'
            shift_bar.style.left = left + 'px'
            shift_bar.style.backgroundColor = 'red'
            shift_bar.style.padding = "0px 0px 0px 0px";
            shift_bar.style.margin = "0px 0px 0px 0px";

            par.appendChild(shift_bar)

        }

        timeline_data_row = function(par, data, cellwidth, cellheight, shift){

            var holding_div = document.createElement('div')
            
            holding_div.style.height = cellheight + 'px'
            holding_div.style.padding = "0px 0px 0px 0px";
            holding_div.style.margin = "0px 0px 0px 0px";
            holding_div.style.borderWidth = "0px 0px 0px 0px";

            data_bar(holding_div, data, cellwidth, cellheight, shift)
            timeline_ticks_table(holding_div, data, cellwidth, cellheight )

            par.appendChild(holding_div)

        }



        /*timeline_data_row(
            timelineRootTableTr ,
            data["axis_label"][1],
            data["options"]["cellwidth"],
            data["options"]["cellheight"],
            data['shifts'][0]
            )*/

        timeline_data_manyRows = function(par, data, cellwidth, cellheight, shifts){

            var shift_count = shifts.length;

            for (var i = 0; i< shift_count; i++){

                var tableRow = document.createElement('tr')

                timeline_data_row(tableRow, data, cellwidth, cellheight, shifts[i])

                par.appendChild(tableRow)
            }



        }

        timeline_data_manyRows(
            timelineRootTableTbody ,
            data["axis_label"][1],
            data["options"]["cellwidth"],
            data["options"]["cellheight"],
            data['shifts']
            )


    </script>

</body>
</html>
    